<!-- TOPBAR (72px) - Componente compartido -->
<nav class="h-[72px] bg-bg-sidebar border-b border-[rgba(212,175,55,0.25)] flex items-center px-4 fixed top-0 left-0 right-0 z-40">
  <!-- Left Zone -->
  <div class="flex items-center gap-3 w-[280px]">
    <button @click="sidebarOpen = !sidebarOpen" class="w-11 h-11 flex items-center justify-center rounded-lg hover:bg-gold-20 text-gold text-xl">â˜°</button>
    <div class="text-txt-secondary text-sm">ğŸ  <span class="mx-1">â€º</span> <span class="text-white" x-text="pageTitle"></span></div>
  </div>
  <!-- Center Zone -->
  <div class="flex-1 max-w-[500px] mx-auto relative" x-data="{searchOpen:false, q:''}">
    <div class="relative">
      <input type="text" x-model="q" @focus="searchOpen=true" @keydown.escape="searchOpen=false;q=''"
        class="w-full h-11 bg-bg-card border border-[rgba(212,175,55,0.25)] rounded-full px-5 pl-11 text-sm text-white placeholder-txt-muted focus:border-gold"
        placeholder="Buscar mesas, comandas, platos, clientes... (Ctrl+K)">
      <span class="absolute left-4 top-3 text-txt-muted">ğŸ”</span>
    </div>
    <div x-show="searchOpen && q.length > 1" @click.outside="searchOpen=false" x-transition
      class="absolute top-14 left-0 right-0 bg-bg-card border border-[rgba(212,175,55,0.25)] rounded-xl shadow-2xl p-3 z-50">
      <p class="text-[10px] text-txt-muted uppercase mb-2">Platos</p>
      <div class="flex items-center gap-3 p-2 rounded-lg hover:bg-gold-20 cursor-pointer"><span>ğŸ½ï¸</span><div><p class="text-sm">Ceviche ClÃ¡sico</p><p class="text-xs text-txt-muted">S/.45 Â· 12 vendidos</p></div></div>
      <p class="text-[10px] text-txt-muted uppercase mt-3 mb-2">Mesas</p>
      <div class="flex items-center gap-3 p-2 rounded-lg hover:bg-gold-20 cursor-pointer"><span>ğŸª‘</span><div><p class="text-sm">Mesa 5</p><p class="text-xs text-txt-muted">Ocupada Â· Juan PÃ©rez</p></div></div>
      <p class="text-xs text-txt-muted text-center mt-2 pt-2 border-t border-[rgba(212,175,55,0.1)]">â†‘â†“ navegar Â· Enter seleccionar Â· Esc cerrar</p>
    </div>
  </div>
  <!-- Right Zone -->
  <div class="flex items-center gap-3 ml-4">
    <div class="text-right mr-2 hidden lg:block">
      <p id="clock" class="text-white text-sm font-semibold tabular-nums">--:--:--</p>
      <p id="dateStr" class="text-txt-muted text-[11px]">--</p>
    </div>
    <div class="w-px h-8 bg-[rgba(212,175,55,0.15)] hidden lg:block"></div>
    <div class="hidden lg:flex items-center gap-1.5 px-2">
      <span class="w-2 h-2 rounded-full bg-st-preparado pulse-dot"></span>
      <span class="text-xs text-st-preparado font-medium">Online</span>
      <span class="text-[10px] text-txt-muted ml-1">8 mozos</span>
    </div>
    <div class="w-px h-8 bg-[rgba(212,175,55,0.15)] hidden lg:block"></div>
    <!-- Shortcuts -->
    <div class="relative" x-data="{open:false}">
      <button @click="open=!open" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gold-20 text-lg">âš¡</button>
      <div x-show="open" @click.outside="open=false" x-transition class="absolute right-0 top-12 w-64 bg-bg-card border border-[rgba(212,175,55,0.25)] rounded-xl shadow-2xl p-2 z-50">
        <p class="text-gold font-semibold text-sm px-3 py-2">âš¡ Atajos RÃ¡pidos</p>
        <a href="/comandas.html" class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gold-20 cursor-pointer">
          <span class="text-sm">ğŸ†• Nueva comanda</span>
          <span class="text-[10px] text-txt-muted bg-bg-sidebar px-1.5 py-0.5 rounded">Ctrl+N</span>
        </a>
        <a href="/mesas.html" class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gold-20 cursor-pointer">
          <span class="text-sm">ğŸª‘ Ver mapa mesas</span>
          <span class="text-[10px] text-txt-muted bg-bg-sidebar px-1.5 py-0.5 rounded">Ctrl+M</span>
        </a>
        <a href="/reportes.html" class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gold-20 cursor-pointer">
          <span class="text-sm">ğŸ“Š Abrir reportes</span>
          <span class="text-[10px] text-txt-muted bg-bg-sidebar px-1.5 py-0.5 rounded">Ctrl+R</span>
        </a>
        <a href="/configuracion.html" class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gold-20 cursor-pointer">
          <span class="text-sm">âš™ï¸ ConfiguraciÃ³n</span>
          <span class="text-[10px] text-txt-muted bg-bg-sidebar px-1.5 py-0.5 rounded">Ctrl+,</span>
        </a>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gold-20 cursor-pointer" @click="document.querySelector('[placeholder*=Buscar]')?.focus()">
          <span class="text-sm">ğŸ” Buscar</span>
          <span class="text-[10px] text-txt-muted bg-bg-sidebar px-1.5 py-0.5 rounded">Ctrl+K</span>
        </div>
      </div>
    </div>
    <!-- Notifications -->
    <div class="relative" x-data="{open:false}">
      <button @click="open=!open" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gold-20 text-lg relative">
        ğŸ””<span class="absolute -top-0.5 -right-0.5 w-4 h-4 bg-st-pagado rounded-full text-[9px] font-bold flex items-center justify-center">5</span>
      </button>
      <div x-show="open" @click.outside="open=false" x-transition class="absolute right-0 top-12 w-80 bg-bg-card border border-[rgba(212,175,55,0.25)] rounded-xl shadow-2xl z-50">
        <div class="flex items-center justify-between px-4 py-3 border-b border-[rgba(212,175,55,0.1)]">
          <span class="font-semibold text-sm">Notificaciones</span>
          <span class="text-xs text-gold cursor-pointer hover:underline">Marcar todas leÃ­das</span>
        </div>
        <div class="max-h-72 overflow-y-auto">
          <template x-for="(n,i) in sharedData.notifs" :key="i">
            <div class="flex gap-3 px-4 py-3 hover:bg-gold-20 cursor-pointer border-b border-[rgba(212,175,55,0.05)]" :class="n.unread && 'bg-[rgba(212,175,55,0.04)]'">
              <span x-text="n.icon" class="text-lg mt-0.5"></span>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium truncate" x-text="n.title"></p>
                <p class="text-xs text-txt-muted" x-text="n.time"></p>
              </div>
              <span x-show="n.unread" class="w-2 h-2 rounded-full bg-gold mt-2 flex-shrink-0"></span>
            </div>
          </template>
        </div>
        <div class="px-4 py-2.5 text-center border-t border-[rgba(212,175,55,0.1)]">
          <span class="text-xs text-gold cursor-pointer hover:underline">Ver todas las notificaciones</span>
        </div>
      </div>
    </div>
    <!-- Profile -->
    <div class="relative" x-data="{open:false}">
      <button @click="open=!open" class="relative">
        <div class="w-9 h-9 rounded-full bg-gold flex items-center justify-center text-bg-primary font-bold text-sm border-2 border-[rgba(212,175,55,0.4)]">A</div>
        <span class="absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full bg-st-preparado border-2 border-bg-sidebar"></span>
      </button>
      <div x-show="open" @click.outside="open=false" x-transition class="absolute right-0 top-12 w-72 bg-bg-card border border-[rgba(212,175,55,0.25)] rounded-xl shadow-2xl z-50">
        <div class="text-center py-5 border-b border-[rgba(212,175,55,0.1)]">
          <div class="w-16 h-16 rounded-full bg-gold mx-auto flex items-center justify-center text-bg-primary font-bold text-2xl mb-2">A</div>
          <p class="font-semibold">Admin Principal</p>
          <p class="text-xs text-txt-muted">admin@lasgambusinas.com</p>
          <span class="inline-block mt-1.5 text-[10px] font-bold bg-gold text-bg-primary px-2.5 py-0.5 rounded-full">Administrador</span>
        </div>
        <div class="p-2">
          <div class="px-3 py-2 rounded-lg hover:bg-gold-20 cursor-pointer text-sm">ğŸ‘¤ Mi perfil</div>
          <a href="/configuracion.html" class="px-3 py-2 rounded-lg hover:bg-gold-20 cursor-pointer text-sm block">âš™ï¸ ConfiguraciÃ³n</a>
          <div class="flex items-center justify-between px-3 py-2">
            <span class="text-sm">ğŸ¨ Modo oscuro</span>
            <div class="w-9 h-5 bg-gold rounded-full relative cursor-pointer"><div class="absolute right-0.5 top-0.5 w-4 h-4 bg-white rounded-full"></div></div>
          </div>
          <div class="border-t border-[rgba(212,175,55,0.1)] mt-1 pt-1">
            <div @click="logout()" class="px-3 py-2 rounded-lg hover:bg-[rgba(255,71,87,0.1)] cursor-pointer text-sm text-st-pagado">ğŸšª Cerrar sesiÃ³n</div>
          </div>
        </div>
        <div class="px-4 py-2 border-t border-[rgba(212,175,55,0.1)] text-[10px] text-txt-muted">v2.0.0-fase7 Â· SesiÃ³n: 2h 34m</div>
      </div>
    </div>
  </div>
</nav>
